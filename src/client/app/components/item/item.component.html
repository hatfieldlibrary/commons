<!--
  ~ Copyright (c) 2017.
  ~
  ~   This program is free software: you can redistribute it and/or modify
  ~    it under the terms of the GNU General Public License as published by
  ~    the Free Software Foundation, either version 3 of the License, or
  ~    (at your option) any later version.
  ~
  ~    This program is distributed in the hope that it will be useful,
  ~    but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~    GNU General Public License for more details.
  ~
  ~   You should have received a copy of the GNU General Public License
  ~    along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->


<div fxLayout="row" fxLayout.xs="column" fxLayout.sm="column" fxLayoutGap.gt-md="20">

  <div fxFlex="80"
       *ngIf="!media.isActive('gt-sm')">

    <app-item-links
      [restricted]="item?.collection.restricted"
      [linkOptions]="item?.collection.linkOptions"
      [assetType]="item?.collection.assetType"
      [searchOptions]="item?.collection.searchOptions"
      [url]="item?.collection.url"
      [searchUrl]="item?.collection.searchUrl"
      [title]="item?.collection.title">
    </app-item-links>

  </div>

  <div fxFlex="100"
       fxFlex.md="60"
       fxFlex.lg="55"
       fxFlex.gt-lg="50">

    <!--<div fxLayout="row" *ngIf="media.isActive('gt-sm')" fxLayoutAlign="left center" style="margin-bottom: 20px;">-->
      <!--<a mat-button [routerLink]="getBackLink()" style="border: 1px solid #ccc;">-->
        <!--<mat-icon>-->
          <!--<app-back-black-svg></app-back-black-svg>-->
        <!--</mat-icon>&nbsp;Back to List-->
      <!--</a>-->
    <!--</div>-->

    <mat-card-title fxHide="true" fxShow.gt-sm="true">
      {{item?.collection.title}}
    </mat-card-title>

    <p [innerHTML]="item?.collection.description" style="font-size: 1.2em"></p>

    <mat-card-subtitle class="section-spacer">More information about this {{getItemType()}}.</mat-card-subtitle>

    <div fxLayout="column" fxLayoutGap="20" role="list" class="meta-container">
      <div fxLayout="row" fxLayoutGap="20" class="meta-row" fxFill>
        <div class="meta-label mat-body-2">Collection Areas</div>
        <div class="meta-text">
          <span *ngFor="let parent of item.collection.parent; let i = index">
          {{parent.title}}<span *ngIf="item.collection.parent.length !== i + 1">, </span></span>
        </div>
      </div>
      <div fxLayout="row" fxLayoutGap="20" class="meta-row" fxFill *ngIf="hasTypes()">
        <div class="meta-label mat-body-2">Content Types</div>
        <div class="meta-text">
          <span *ngFor="let type of item?.itemTypes; let i = index">
          {{type.name}}<span *ngIf="item.itemTypes.length !== i + 1">, </span></span>
        </div>
      </div>
      <div fxLayout="row" fxLayoutGap="20" class="meta-row" fxFill *ngIf="hasSubjects()">
        <div class="meta-label mat-body-2">Subjects</div>
        <div class="meta-text">
          <span *ngFor="let sub of item?.subjects; let i = index;">
          {{sub.name}}<span *ngIf="item.subjects.length !== i + 1">, </span></span></div>
      </div>
      <div fxLayout="row" fxLayoutGap="20" class="meta-row" *ngIf="hasDates()">
        <div class="meta-label mat-body-2">Dates</div>
        <div class="meta-text">{{item?.collection.date}}</div>
      </div>
      <div fxLayout="row" fxLayoutGap="20" class="meta-row" fxFill fxFill *ngIf="hasItems()">
        <div class="meta-label mat-body-2">Collection Size</div>
        <div class="meta-text">{{item?.collection.items}}</div>
      </div>
    </div>


  </div>
  <div class="fill-remaining-space"></div>
  <div
    fxFlex
    fxFlex.sm="35"
    fxFlex.md="35"
    fxFlex.gt-md="40"
    *ngIf="media.isActive('gt-sm')"
    class="item-links-container">

    <app-item-links style="height: 100%"
                    [restricted]="item?.collection.restricted"
                    [linkOptions]="item?.collection.linkOptions"
                    [assetType]="item?.collection.assetType"
                    [searchOptions]="item?.collection.searchOptions"
                    [url]="item?.collection.url"
                    [searchUrl]="item?.collection.searchUrl"
                    [title]="item?.collection.title"
                    [count]="item?.collection.items">
    </app-item-links>
  </div>
</div>

<div class="section-spacer" fxLayout="row" fxLayout.xs="column" fxLayout.sm="column" fxLayoutGap.gt-sm="40">

  <div fxFlex="100"
       fxFlex.md="60"
       fxFlex.lg="60"
       fxFlex.gt-lg="50">

    <mat-card-subtitle>This collection is part of</mat-card-subtitle>
    <mat-card-title>{{item?.category?.title}}</mat-card-title>


    <p [innerHTML]="item?.category?.description" style="font-size: 1.2em"></p>

    <a mat-raised-button color="primary" class="accent-button" href="{{item?.category?.url}}"
       target="_blank">{{item?.category?.linkLabel}}</a>

  </div>
  <div class="fill-remaining-space"></div>

  <div fxFlex
       fxFlex.sm="35"
       fxFlex.md="35"
       fxFlex.gt-md="30"
       fxShow="false"
       fxShow.gt-sm="true"
       *ngIf="item?.category?.id === 1 || item?.category?.id === 7">

    <mat-list>
      <mat-list-item>
        <a mat-button style="width:100%" href="http://libmedia.willamette.edu/academiccommons/student/index.php"
           target="_blank">
          <div fxLayout="row" fxLayoutAlign="start center">
            <app-info-svg></app-info-svg>
            Submission Instructions
          </div>
        </a>
      </mat-list-item>
      <mat-list-item>
        <a mat-button style="width:100%"
           href="https://libguides.willamette.edu/thesis_submission" target="_blank">
          <div fxLayout="row" fxLayoutAlign="start center">
            <app-run-svg></app-run-svg>
            Tutorial
          </div>
        </a>
      </mat-list-item>
    </mat-list>
  </div>

</div>




