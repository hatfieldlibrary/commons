<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>commons documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">commons documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">







<ol class="breadcrumb">
  <li>Injectables</li>
  <li>FilterUpdateServiceB</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/client/app/core/services/filters-2/filter-update.service.ts</code>
        </p>

            <p class="comment">
                <h3>Description</h3>
            </p>
            <p class="comment">
                <p>The filter selection components use this service to update the state of the application filters.
After updating the store, the public functions return an updated selected filters list
to the calling component.</p>

            </p>


            <section>
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>
                <tr>
                    <td class="col-md-4">
                        <h6><b>Properties</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#selectedGroups">selectedGroups</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#selectedSubjects">selectedSubjects</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#selectedTypes">selectedTypes</a>
                            </li>
                        </ul>
                    </td>
                </tr>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getPositionInSelectedList">getPositionInSelectedList</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#getSelectedFieldObject">getSelectedFieldObject</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#modifyFieldList">modifyFieldList</a>
                            </li>
                            <li>
                                    <span class="modifier">Private</span>
                                <a href="#removeDefaultCollection">removeDefaultCollection</a>
                            </li>
                            <li>
                                <a href="#updateSelectedFields">updateSelectedFields</a>
                            </li>
                            <li>
                                <a href="#updateSelectSingleAreaStore">updateSelectSingleAreaStore</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section>
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(store: <a href="../interfaces/State.html">Store<fromRoot.State></a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="50" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:50</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>store</td>
                                                  
                                                        <td>
                                                                    <code><a href="../interfaces/State.html" target="_self" >Store&lt;fromRoot.State&gt;</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="methods">
            Methods
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getPositionInSelectedList"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            getPositionInSelectedList
                            </b>
                            <a href="#getPositionInSelectedList"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>getPositionInSelectedList(selectedFields: <a href="../classes/FieldFilterType.html">FieldFilterType[]</a>, field: <a href="../classes/FieldFilterType.html">FieldFilterType</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="151" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:151</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Gets the position index in id string that matches the provided id.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>selectedFields</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>field</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>the id of the resource</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="getSelectedFieldObject"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            getSelectedFieldObject
                            </b>
                            <a href="#getSelectedFieldObject"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>getSelectedFieldObject(fieldId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, list: <a href="../classes/FieldFilterType.html">FieldFilterType[]</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="141" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:141</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Gets the FieldFilterType object with id value from the provided list.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>fieldId</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                                <tr>
                                                        <td>list</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="modifyFieldList"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            modifyFieldList
                            </b>
                            <a href="#modifyFieldList"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>modifyFieldList(list: <a href="../classes/FieldFilterType.html">FieldFilterType[]</a>, selected: <a href="../classes/FieldFilterType.html">FieldFilterType</a>, position: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="121" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:121</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Supports adding or removing filters from selected list.  Removes the filter if a positive index position
is provided (i.e. the item was previously selected and is now being de-selected). Otherwise returns
list with the additional member.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>list</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>selected filter list</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>selected</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>position</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>the array index (or -1)</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="removeDefaultCollection"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            removeDefaultCollection
                            </b>
                            <a href="#removeDefaultCollection"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                            <span class="modifier-icon icon ion-ios-reset"></span>
                        <code>removeDefaultCollection(fieldList: <a href="../classes/FieldFilterType.html">FieldFilterType[]</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="158" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:158</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>The removes the default field value (if it exists) from the first position in the array.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>fieldList</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="updateSelectedFields"></a>
                        <span class="name">
                            <b>
                            updateSelectedFields
                            </b>
                            <a href="#updateSelectedFields"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>updateSelectedFields(selectedFields: <a href="../classes/FieldFilterType.html">FieldFilterType[]</a>, fields: <a href="../classes/FieldFilterType.html">FieldFilterType[]</a>, fieldId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>, type: <a href="../undefineds/FieldTypeKey.html">FieldTypeKey</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="79" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:79</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Handles filter updates for all field types.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                                    <td>Description</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>selectedFields</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>the current selected fields</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>fields</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>all available fields</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>fieldId</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>the field id for the newly selected field</p>
</code>
                                                        </td>
                                                </tr>
                                                <tr>
                                                        <td>type</td>
                                                        <td>
                                                                    <code><a href="../miscellaneous/enumerations.html#FieldTypeKey" target="_self" >FieldTypeKey</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                        <td>
                                                                <code><p>the field type</p>
</code>
                                                        </td>
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code>{}</code>

                            </div>
                                <div class="io-description">
                                    
                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="updateSelectSingleAreaStore"></a>
                        <span class="name">
                            <b>
                            updateSelectSingleAreaStore
                            </b>
                            <a href="#updateSelectSingleAreaStore"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
<code>updateSelectSingleAreaStore(areaList: <a href="../classes/FieldFilterType.html">FieldFilterType[]</a>, areaId: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank">number</a>)</code>
                    </td>
                </tr>


                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="63" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:63</a></div>
                            </td>
                        </tr>


                <tr>
                    <td class="col-md-4">
                            <div class="io-description"><p>Public method for updating the selected area. The current application permits only a single area
to be selected at any time. If multiple areas are needed, this function will look
like the functions for other filter types.</p>
</div>

                            <div class="io-description">
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>areaList</td>
                                                        <td>
                                                                    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                                <tr>
                                                        <td>areaId</td>
                                                        <td>
                                                                    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/number" target="_blank" >number</a></code>
                                                        </td>
                                                    
                                                    <td>
                                                            No
                                                    </td>
                                                    

                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                            <div>
                            </div>
                            <div class="io-description">
                                <b>Returns : </b>    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>

                            </div>
                                <div class="io-description">
                                    <p>the updated selected area list</p>

                                </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section>
    
        <h3 id="inputs">
            Properties
        </h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="selectedGroups"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            selectedGroups
                            </b>
                            <a href="#selectedGroups"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>selectedGroups:     <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="50" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:50</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="selectedSubjects"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            selectedSubjects
                            </b>
                            <a href="#selectedSubjects"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>selectedSubjects:     <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="49" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:49</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
                        <a name="selectedTypes"></a>
                        <span class="name">
                            <b>
                                <span class="modifier">Private</span>
                            selectedTypes
                            </b>
                            <a href="#selectedTypes"><span class="icon ion-ios-link"></span></a>
                        </span>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span><code>selectedTypes:     <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>
</code>
                    </td>
                </tr>
                    <tr>
                        <td class="col-md-4">
                            <i>Type : </i>    <code><a href="../classes/FieldFilterType.html" target="_self" >FieldFilterType[]</a></code>

                        </td>
                    </tr>
                        <tr>
                            <td class="col-md-4">
                                    <div class="io-line">Defined in <a href="" data-line="48" class="link-to-prism">src/client/app/core/services/filters-2/filter-update.service.ts:48</a></div>
                            </td>
                        </tr>


            </tbody>
        </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import {Injectable} from &#x27;@angular/core&#x27;;
import {SetAreaFilter, SetGroupFilter, SetSubjectFilter, SetTypeFilter} from &#x27;../../ngrx/actions/filter.actions&#x27;;
import * as fromRoot from &#x27;../../ngrx/reducers&#x27;;
import {Store} from &#x27;@ngrx/store&#x27;;
import {FieldFilterType} from &#x27;../../data-types/field-filter.type&#x27;;

export enum FieldTypeKey {
  AREA,
  TYPE,
  SUBJECT,
  GROUP
}

/**
 * The filter selection components use this service to update the state of the application filters.
 * After updating the store, the public functions return an updated selected filters list
 * to the calling component.
 */
@Injectable({
  providedIn: &#x27;root&#x27;
})
export class FilterUpdateServiceB {

  private selectedTypes: FieldFilterType[];
  private selectedSubjects: FieldFilterType[];
  private selectedGroups: FieldFilterType[];

  constructor(private store: Store&lt;fromRoot.State&gt;) {
  }

  /**
   * Public method for updating the selected area. The current application permits only a single area
   * to be selected at any time. If multiple areas are needed, this function will look
   * like the functions for other filter types.
   * @param {FieldFilterType[]} areaList
   * @param {number} areaId
   * @returns {FieldFilterType[]} the updated selected area list
   */
  updateSelectSingleAreaStore(areaList: FieldFilterType[], areaId: number): FieldFilterType[] {
    const selectedArea: FieldFilterType &#x3D; this.getSelectedFieldObject(areaId, areaList);
    if (selectedArea) {
      this.store.dispatch(new SetAreaFilter([selectedArea]));
      return [selectedArea];
    }
  }

  /**
   * Handles filter updates for all field types.
   * @param {FieldFilterType[]} selectedFields the current selected fields
   * @param {FieldFilterType[]} fields all available fields
   * @param {number} fieldId the field id for the newly selected field
   * @param {FieldTypeKey} type the field type
   * @returns {FieldFilterType[]}
   */
   updateSelectedFields(selectedFields: FieldFilterType[],
                               fields: FieldFilterType[],
                               fieldId: number,
                               type: FieldTypeKey) {
    // Remove the default field from the selected fields list if it exists.
    selectedFields &#x3D; this.removeDefaultCollection(selectedFields);
    // Get the FieldFilerType object for the newly selected field.
    const selectedField: FieldFilterType &#x3D; this.getSelectedFieldObject(fieldId, fields);
    // Get the index of the selected field from the array of currently selected fields.
    // The index value will be positive if the field is being de-selected.
    const currentIndex &#x3D; this.getPositionInSelectedList(selectedFields, selectedField);
    // Now update based on type.
    switch (type) {
      case FieldTypeKey.TYPE: {
        this.selectedTypes &#x3D; this.modifyFieldList(selectedFields, selectedField, currentIndex);
        this.store.dispatch(new SetTypeFilter(selectedFields));
        return this.selectedTypes;
      }
      case FieldTypeKey.SUBJECT: {
        this.selectedSubjects &#x3D; this.modifyFieldList(selectedFields, selectedField, currentIndex);
        this.store.dispatch(new SetSubjectFilter(selectedFields));
        return this.selectedSubjects;
      }
      case FieldTypeKey.GROUP: {
        this.selectedGroups &#x3D; this.modifyFieldList(selectedFields, selectedField, currentIndex);
        this.store.dispatch(new SetGroupFilter(selectedFields));
        return this.selectedGroups;
      }
      default: {
        console.log(&#x27;Error: Unrecognized field type.&#x27;);
      }
    }
  }

  /**
   * Supports adding or removing filters from selected list.  Removes the filter if a positive index position
   * is provided (i.e. the item was previously selected and is now being de-selected). Otherwise returns
   * list with the additional member.
   * @param {FieldFilterType[]} list selected filter list
   * @param {number} position the array index (or -1)
   * @returns {FieldFilterType[]}
   */
  private modifyFieldList(list: FieldFilterType[], selected: FieldFilterType, position: number) {
    if (position &gt;&#x3D; 0) {
      // If the currently selected index is in the list, remove.
      list.splice(position, 1);
      // If the selected list is empty, set to default (all collections).
      if (list.length &#x3D;&#x3D;&#x3D; 0) {
        list.push({id: 0, name: &#x27;&#x27;});
      }
      return list;
    }
    list.push(selected);
    return list;
  }

  /**
   * Gets the FieldFilterType object with id value from the provided list.
   * @param {number} fieldId
   * @param {FieldFilterType[]} list
   * @returns {FieldFilterType}
   */
  private getSelectedFieldObject(fieldId: number, list: FieldFilterType[]): FieldFilterType {
    return list.find((current) &#x3D;&gt; current.id &#x3D;&#x3D;&#x3D; fieldId);
  }

  /**
   * Gets the position index in id string that matches the provided id.
   * @param {FieldFilterType} field the id of the resource
   * @param {string} type the type constant for the resource
   * @returns {number}
   */
  private getPositionInSelectedList(selectedFields: FieldFilterType[], field: FieldFilterType): number {
    return (selectedFields.findIndex((current) &#x3D;&gt; current.id &#x3D;&#x3D;&#x3D; field.id))
  }

  /**
   * The removes the default field value (if it exists) from the first position in the array.
   */
  private removeDefaultCollection(fieldList: FieldFilterType[]): FieldFilterType[] {
    const zeroIndex &#x3D; this.getPositionInSelectedList(fieldList, {id: 0, name: &#x27;&#x27;});
    if (zeroIndex &#x3D;&#x3D;&#x3D; 0) {
      fieldList.shift();
    }
    return fieldList;
  }

}
</code></pre>
    </div>

</div>











                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'FilterUpdateServiceB.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
